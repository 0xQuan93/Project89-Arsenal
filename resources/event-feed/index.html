<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Global Event Feed</title>
    <style>
:root{color-scheme:dark;--bg:#05010f;--accent:#00ff88;--accent-alt:#3cffea;--text:#f1f6ff;--subtext:rgba(241,246,255,.7);--panel-bg:rgba(5,0,20,.8);--border:rgba(0,255,136,.2);--warning:#ff4f6d;--info:#ffd700}*{box-sizing:border-box;margin:0;padding:0}body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Rajdhani,Orbitron,Exo,'Segoe UI',sans-serif;min-height:100vh;overflow-x:hidden}.glow-grid{position:fixed;inset:0;background-image:linear-gradient(rgba(0,255,136,.08)1px,transparent 1px),linear-gradient(90deg,rgba(60,255,234,.06)1px,transparent 1px);background-size:120px 120px;mix-blend-mode:screen;pointer-events:none;animation:pulse 12s infinite linear;z-index:0}@keyframes pulse{from{transform:translate3d(0,0,0)}to{transform:translate3d(-60px,-60px,0)}}.app-shell{width:100%;max-width:1400px;background:linear-gradient(135deg,rgba(12,0,32,.95),rgba(8,8,28,.8));border:1px solid rgba(0,255,136,.3);border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.7),0 0 30px rgba(0,255,136,.2);padding:2rem;position:relative;margin:2rem auto;z-index:1}.app-shell::after{content:"";position:absolute;inset:15px;border:1px solid rgba(0,255,136,.25);border-radius:12px;pointer-events:none}.title{font-size:clamp(1.8rem,4vw,2.5rem);letter-spacing:.2rem;text-transform:uppercase;margin:0 0 .5rem;color:var(--accent);text-shadow:0 0 12px var(--accent),0 0 24px rgba(0,255,136,.4);text-align:center}.subtitle{margin:0 0 2rem;color:var(--subtext);font-size:.95rem;text-align:center}.header-bar{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--border)}.status-indicator{display:flex;align-items:center;gap:.5rem;font-size:.85rem}.status-dot{width:10px;height:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 10px var(--accent);animation:blink 2s infinite}@keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}.last-updated{font-size:.8rem;color:var(--subtext);font-family:monospace}.btn-group{display:flex;flex-wrap:wrap;gap:.75rem}.btn{padding:.6rem 1.2rem;border-radius:20px;border:1px solid rgba(0,255,136,.4);background:rgba(5,0,20,.7);color:var(--text);text-transform:uppercase;font-size:.75rem;letter-spacing:.1em;cursor:pointer;transition:all .2s;font-family:inherit;font-weight:600}.btn:hover{border-color:var(--accent);box-shadow:0 0 15px rgba(0,255,136,.5);transform:translateY(-1px)}.btn-primary{background:linear-gradient(120deg,var(--accent),#1cff9b);color:#000;border:none}.feed-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:1.5rem;margin-bottom:2rem}.feed-panel{background:var(--panel-bg);border:1px solid var(--border);border-radius:12px;padding:1.5rem;display:flex;flex-direction:column;gap:1rem;max-height:600px}.feed-panel.loading{opacity:.6}.panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.panel-title{font-size:1.1rem;color:var(--accent-alt);text-transform:uppercase;letter-spacing:.12em;font-weight:600}.refresh-btn{background:none;border:1px solid var(--border);color:var(--text);cursor:pointer;padding:.4rem .8rem;border-radius:15px;font-size:.7rem;transition:all .2s}.refresh-btn:hover{border-color:var(--accent);color:var(--accent)}.feed-container{flex:1;overflow-y:auto;overflow-x:hidden;padding-right:.5rem;max-height:500px}.feed-item{background:rgba(0,0,0,.3);border:1px solid var(--border);border-radius:8px;padding:1rem;margin-bottom:1rem;transition:all .2s;cursor:pointer}.feed-item:hover{border-color:var(--accent);box-shadow:0 0 15px rgba(0,255,136,.15);transform:translateX(2px)}.item-title{font-size:.95rem;color:var(--text);line-height:1.5;margin-bottom:.5rem;font-weight:600;word-wrap:break-word;overflow-wrap:break-word}.item-source{font-size:.75rem;color:var(--accent);text-transform:uppercase;letter-spacing:.08em;margin-bottom:.3rem}.item-time{font-size:.7rem;color:var(--subtext);font-family:monospace}.item-meta{display:flex;justify-content:space-between;align-items:center;margin-top:.5rem;flex-wrap:wrap;gap:.5rem}.category-tag{padding:.25rem .6rem;background:rgba(60,255,234,.15);border:1px solid rgba(60,255,234,.3);border-radius:10px;font-size:.65rem;color:var(--accent-alt);text-transform:uppercase;letter-spacing:.05em}.loading-spinner{text-align:center;padding:2rem;color:var(--subtext)}.spinner-icon{font-size:2rem;animation:spin 1s linear infinite}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}.empty-state{text-align:center;padding:3rem 1rem;color:var(--subtext)}.empty-icon{font-size:2.5rem;margin-bottom:1rem;opacity:.5}.empty-text{font-size:.95rem}.feed-container::-webkit-scrollbar{width:6px}.feed-container::-webkit-scrollbar-track{background:rgba(0,0,0,.3);border-radius:10px}.feed-container::-webkit-scrollbar-thumb{background:rgba(0,255,136,.3);border-radius:10px}.feed-container::-webkit-scrollbar-thumb:hover{background:rgba(0,255,136,.5)}.alert-panel{background:rgba(255,79,109,.1);border:1px solid var(--warning);padding:1rem;border-radius:10px;margin-bottom:1.5rem;text-align:center}.alert-text{color:var(--warning);font-size:.9rem}.footer{text-align:center;font-size:.8rem;color:var(--subtext);margin-top:2rem;padding-top:1rem;border-top:1px solid var(--border)}@media(max-width:768px){.app-shell{padding:1.5rem;margin:1rem}.feed-grid{grid-template-columns:1fr}.header-bar{flex-direction:column;align-items:flex-start}.feed-panel{max-height:500px}.feed-container{max-height:400px}}
    </style>
  </head>
  <body>
    <div class="glow-grid"></div>
    <main class="app-shell">
      <h1 class="title">Global Event Feed</h1>
      <p class="subtitle">Real-time monitoring of significant global events and pattern detection</p>

      <div class="header-bar">
        <div class="status-indicator">
          <div class="status-dot"></div>
          <span>Feed Active</span>
        </div>
        <div class="last-updated">Last updated: <span id="last-updated-time">--:--:--</span></div>
        <div class="btn-group">
          <button class="btn btn-primary" id="refresh-all-btn">Refresh All Feeds</button>
        </div>
      </div>

      <div class="alert-panel" id="api-notice">
        <div class="alert-text">
          ‚úÖ RSS feeds active! Currently monitoring: NY Times, BBC, Al Jazeera, Wired, TechCrunch, HN, Science.org & more. Add your own RSS URLs or API keys in CONFIG section for additional sources.
        </div>
      </div>

      <div class="feed-grid">
        <!-- Breaking News Feed -->
        <div class="feed-panel" id="news-panel">
          <div class="panel-header">
            <div class="panel-title">üåç Breaking News</div>
            <button class="refresh-btn" onclick="refreshFeed('news')">‚Üª</button>
          </div>
          <div class="feed-container" id="news-feed">
            <div class="loading-spinner">
              <div class="spinner-icon">‚óå</div>
              <div>Loading feed...</div>
            </div>
          </div>
        </div>

        <!-- Technology Updates -->
        <div class="feed-panel" id="tech-panel">
          <div class="panel-header">
            <div class="panel-title">üíª Tech & AI</div>
            <button class="refresh-btn" onclick="refreshFeed('tech')">‚Üª</button>
          </div>
          <div class="feed-container" id="tech-feed">
            <div class="loading-spinner">
              <div class="spinner-icon">‚óå</div>
              <div>Loading feed...</div>
            </div>
          </div>
        </div>

        <!-- Anomalous Events -->
        <div class="feed-panel" id="anomaly-panel">
          <div class="panel-header">
            <div class="panel-title">‚ö° Anomalies</div>
            <button class="refresh-btn" onclick="refreshFeed('anomaly')">‚Üª</button>
          </div>
          <div class="feed-container" id="anomaly-feed">
            <div class="loading-spinner">
              <div class="spinner-icon">‚óå</div>
              <div>Loading feed...</div>
            </div>
          </div>
        </div>

        <!-- Synchronicity Patterns -->
        <div class="feed-panel" id="pattern-panel">
          <div class="panel-header">
            <div class="panel-title">üéØ Pattern Detection</div>
            <button class="refresh-btn" onclick="refreshFeed('pattern')">‚Üª</button>
          </div>
          <div class="feed-container" id="pattern-feed">
            <div class="loading-spinner">
              <div class="spinner-icon">‚óå</div>
              <div>Loading feed...</div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <strong>Live RSS feeds active</strong> ‚Ä¢ Add more sources in CONFIG section<br>
        Supports: RSS feeds (no auth) ‚Ä¢ NewsAPI ‚Ä¢ Custom endpoints ‚Ä¢ All processing local
      </div>
    </main>

    <script>
// ========================================
// CONFIGURATION SECTION
// ========================================
// Add your API keys and endpoints here

const CONFIG = {
  // Example: NewsAPI (https://newsapi.org/)
  newsApiKey: '', // Add your NewsAPI key here
  
  // RSS Feed URLs (these work without API keys using RSS2JSON service)
  rssFeeds: {
    news: [
      'https://rss.nytimes.com/services/xml/rss/nyt/World.xml',
      'https://feeds.bbci.co.uk/news/world/rss.xml',
      'https://www.aljazeera.com/xml/rss/all.xml'
    ],
    tech: [
      'https://www.wired.com/feed/rss',
      'https://feeds.feedburner.com/TechCrunch/',
      'https://news.ycombinator.com/rss'
    ],
    science: [
      'https://www.science.org/rss/news_current.xml',
      'https://phys.org/rss-feed/'
    ]
  },
  
  // Use RSS2JSON service (no auth required) or set to false to use direct parsing
  useRss2Json: true,
  
  // Custom keywords for anomaly detection
  anomalyKeywords: ['breakthrough', 'unprecedented', 'anomaly', 'mysterious', 'unexplained', 
                     'phenomenon', 'glitch', 'bizarre', 'unusual', 'strange'],
  
  // Pattern detection keywords
  patternKeywords: ['89', 'synchronicity', 'coincidence', 'pattern', 'recurring',
                     'artificial intelligence', 'simulation', 'quantum']
};

// ========================================
// STATE MANAGEMENT
// ========================================

let feedData = {
  news: [],
  tech: [],
  anomaly: [],
  pattern: []
};

let lastUpdate = new Date();

// ========================================
// DEMO DATA (Remove when using real APIs)
// ========================================

function generateDemoData() {
  const demoNews = [
    { title: 'Global Leaders Convene for Climate Summit', source: 'Reuters', time: getRandomTime(), category: 'Politics' },
    { title: 'New Economic Indicators Show Market Volatility', source: 'Bloomberg', time: getRandomTime(), category: 'Economy' },
    { title: 'Breakthrough in Renewable Energy Storage', source: 'Science Daily', time: getRandomTime(), category: 'Science' },
    { title: 'International Space Station Reaches New Milestone', source: 'NASA', time: getRandomTime(), category: 'Space' },
    { title: 'Rising Global Cooperation on Digital Infrastructure', source: 'TechCrunch', time: getRandomTime(), category: 'Technology' }
  ];

  const demoTech = [
    { title: 'New AI Model Achieves Human-Level Performance', source: 'MIT Tech Review', time: getRandomTime(), category: 'AI' },
    { title: 'Quantum Computer Breaks Previous Record', source: 'Nature', time: getRandomTime(), category: 'Quantum' },
    { title: 'Neural Interface Technology Shows Promise', source: 'Wired', time: getRandomTime(), category: 'BCI' },
    { title: 'Open Source LLM Surpasses Expectations', source: 'ArXiv', time: getRandomTime(), category: 'Machine Learning' },
    { title: 'Breakthrough in Edge Computing Architecture', source: 'IEEE Spectrum', time: getRandomTime(), category: 'Computing' }
  ];

  const demoAnomalies = [
    { title: 'Unexplained Signal Detected from Deep Space', source: 'SETI', time: getRandomTime(), category: 'Astronomy' },
    { title: 'Mysterious Pattern in Global Weather Systems', source: 'NOAA', time: getRandomTime(), category: 'Climate' },
    { title: 'Unprecedented Synchronization in Internet Traffic', source: 'Cloudflare', time: getRandomTime(), category: 'Network' },
    { title: 'Anomalous Readings from Quantum Sensors', source: 'CERN', time: getRandomTime(), category: 'Physics' }
  ];

  const demoPatterns = [
    { title: 'Number 89 Appears in Multiple Scientific Studies', source: 'Pattern Analysis', time: getRandomTime(), category: 'Synchronicity' },
    { title: 'Recurring Themes in AI Training Data', source: 'ML Research', time: getRandomTime(), category: 'Data Science' },
    { title: 'Correlation Found in Unrelated Global Events', source: 'Systems Analysis', time: getRandomTime(), category: 'Complexity' },
    { title: 'Identical Code Patterns Emerge Independently', source: 'GitHub', time: getRandomTime(), category: 'Development' }
  ];

  return { news: demoNews, tech: demoTech, anomaly: demoAnomalies, pattern: demoPatterns };
}

function getRandomTime() {
  const now = new Date();
  const randomMinutes = Math.floor(Math.random() * 120);
  const time = new Date(now - randomMinutes * 60000);
  return time.toISOString();
}

// ========================================
// FEED RENDERING
// ========================================

function renderFeed(feedType, items) {
  const container = document.getElementById(`${feedType}-feed`);
  
  if (!items || items.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <div class="empty-icon">üì°</div>
        <div class="empty-text">No ${feedType} items available. Configure API keys to enable live feeds.</div>
      </div>
    `;
    return;
  }

  container.innerHTML = items.map(item => {
    const timeAgo = getTimeAgo(item.time);
    return `
      <div class="feed-item" onclick="openLink('${item.url || '#'}')">
        <div class="item-source">${escapeHtml(item.source)}</div>
        <div class="item-title">${escapeHtml(item.title)}</div>
        <div class="item-meta">
          <div class="category-tag">${escapeHtml(item.category)}</div>
          <div class="item-time">${timeAgo}</div>
        </div>
      </div>
    `;
  }).join('');
}

function getTimeAgo(timestamp) {
  const now = new Date();
  const then = new Date(timestamp);
  const diffMs = now - then;
  const diffMins = Math.floor(diffMs / 60000);
  
  if (diffMins < 1) return 'Just now';
  if (diffMins < 60) return `${diffMins}m ago`;
  const diffHours = Math.floor(diffMins / 60);
  if (diffHours < 24) return `${diffHours}h ago`;
  const diffDays = Math.floor(diffHours / 24);
  return `${diffDays}d ago`;
}

function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

function openLink(url) {
  if (url && url !== '#') {
    window.open(url, '_blank');
  }
}

// ========================================
// RSS PARSING FUNCTIONS
// ========================================

async function parseRSSFeed(url) {
  try {
    if (CONFIG.useRss2Json) {
      // Use RSS2JSON service (CORS-friendly)
      const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`;
      const response = await fetch(apiUrl);
      const data = await response.json();
      
      if (data.status !== 'ok') {
        console.warn(`RSS2JSON error for ${url}:`, data.message);
        return [];
      }
      
      return data.items.map(item => ({
        title: item.title,
        source: data.feed.title || 'RSS Feed',
        time: item.pubDate,
        category: item.categories?.[0] || 'News',
        url: item.link
      }));
    } else {
      // Direct fetch with CORS proxy
      const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`;
      const response = await fetch(proxyUrl);
      const data = await response.json();
      const parser = new DOMParser();
      const xml = parser.parseFromString(data.contents, 'text/xml');
      
      const items = xml.querySelectorAll('item');
      return Array.from(items).map(item => ({
        title: item.querySelector('title')?.textContent || 'No title',
        source: xml.querySelector('channel > title')?.textContent || 'RSS Feed',
        time: item.querySelector('pubDate')?.textContent || new Date().toISOString(),
        category: item.querySelector('category')?.textContent || 'News',
        url: item.querySelector('link')?.textContent || '#'
      }));
    }
  } catch (error) {
    console.error(`Error parsing RSS feed ${url}:`, error);
    return [];
  }
}

async function fetchMultipleRSSFeeds(urls) {
  const promises = urls.map(url => parseRSSFeed(url));
  const results = await Promise.all(promises);
  return results.flat().sort((a, b) => new Date(b.time) - new Date(a.time));
}

// ========================================
// DATA FETCHING FUNCTIONS
// ========================================

async function fetchNews() {
  // Try NewsAPI first if configured
  if (CONFIG.newsApiKey) {
    try {
      const response = await fetch(
        `https://newsapi.org/v2/top-headlines?country=us&apiKey=${CONFIG.newsApiKey}`
      );
      const data = await response.json();
      
      if (data.status === 'ok') {
        return data.articles.slice(0, 10).map(article => ({
          title: article.title,
          source: article.source.name,
          time: article.publishedAt,
          category: 'News',
          url: article.url
        }));
      }
    } catch (error) {
      console.warn('NewsAPI failed, falling back to RSS:', error);
    }
  }
  
  // Fall back to RSS feeds
  if (CONFIG.rssFeeds.news && CONFIG.rssFeeds.news.length > 0) {
    const rssData = await fetchMultipleRSSFeeds(CONFIG.rssFeeds.news);
    if (rssData.length > 0) return rssData.slice(0, 10);
  }
  
  // Fall back to demo data
  return generateDemoData().news;
}

async function fetchTech() {
  // Use RSS feeds for tech news
  if (CONFIG.rssFeeds.tech && CONFIG.rssFeeds.tech.length > 0) {
    const rssData = await fetchMultipleRSSFeeds(CONFIG.rssFeeds.tech);
    if (rssData.length > 0) {
      return rssData.slice(0, 10).map(item => ({
        ...item,
        category: 'Technology'
      }));
    }
  }
  
  // Fall back to demo data
  return generateDemoData().tech;
}

async function fetchAnomalies() {
  // Fetch from news sources and filter for anomaly keywords
  let allItems = [];
  
  // Get news items
  if (CONFIG.rssFeeds.news && CONFIG.rssFeeds.news.length > 0) {
    allItems = await fetchMultipleRSSFeeds(CONFIG.rssFeeds.news);
  }
  
  // Get science items
  if (CONFIG.rssFeeds.science && CONFIG.rssFeeds.science.length > 0) {
    const scienceItems = await fetchMultipleRSSFeeds(CONFIG.rssFeeds.science);
    allItems = [...allItems, ...scienceItems];
  }
  
  // Filter for anomaly keywords
  const filtered = allItems.filter(item => {
    const text = (item.title + ' ' + (item.description || '')).toLowerCase();
    return CONFIG.anomalyKeywords.some(keyword => text.includes(keyword.toLowerCase()));
  });
  
  if (filtered.length > 0) {
    return filtered.slice(0, 8).map(item => ({
      ...item,
      category: 'Anomaly'
    }));
  }
  
  // Fall back to demo data
  return generateDemoData().anomaly;
}

async function fetchPatterns() {
  // Fetch from all sources and filter for pattern keywords
  let allItems = [];
  
  // Aggregate all feeds
  const allFeeds = [
    ...(CONFIG.rssFeeds.news || []),
    ...(CONFIG.rssFeeds.tech || []),
    ...(CONFIG.rssFeeds.science || [])
  ];
  
  if (allFeeds.length > 0) {
    allItems = await fetchMultipleRSSFeeds(allFeeds);
  }
  
  // Filter for pattern keywords
  const filtered = allItems.filter(item => {
    const text = (item.title + ' ' + (item.description || '')).toLowerCase();
    return CONFIG.patternKeywords.some(keyword => text.includes(keyword.toLowerCase()));
  });
  
  if (filtered.length > 0) {
    return filtered.slice(0, 8).map(item => ({
      ...item,
      category: 'Pattern'
    }));
  }
  
  // Fall back to demo data
  return generateDemoData().pattern;
}

// ========================================
// REFRESH LOGIC
// ========================================

async function refreshFeed(feedType) {
  const panel = document.getElementById(`${feedType}-panel`);
  panel.classList.add('loading');
  
  try {
    let data;
    switch(feedType) {
      case 'news': data = await fetchNews(); break;
      case 'tech': data = await fetchTech(); break;
      case 'anomaly': data = await fetchAnomalies(); break;
      case 'pattern': data = await fetchPatterns(); break;
    }
    
    feedData[feedType] = data;
    renderFeed(feedType, data);
    updateTimestamp();
  } catch (error) {
    console.error(`Error fetching ${feedType}:`, error);
    document.getElementById(`${feedType}-feed`).innerHTML = `
      <div class="empty-state">
        <div class="empty-icon">‚ö†Ô∏è</div>
        <div class="empty-text">Error loading feed. Check console for details.</div>
      </div>
    `;
  } finally {
    panel.classList.remove('loading');
  }
}

async function refreshAllFeeds() {
  await Promise.all([
    refreshFeed('news'),
    refreshFeed('tech'),
    refreshFeed('anomaly'),
    refreshFeed('pattern')
  ]);
}

function updateTimestamp() {
  const now = new Date();
  const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
  document.getElementById('last-updated-time').textContent = timeStr;
  lastUpdate = now;
}

// ========================================
// EVENT HANDLERS
// ========================================

document.getElementById('refresh-all-btn').addEventListener('click', refreshAllFeeds);

// Auto-refresh every 5 minutes
setInterval(refreshAllFeeds, 5 * 60 * 1000);

// ========================================
// INITIALIZATION
// ========================================

// Initial load
refreshAllFeeds();

// Check if API keys are configured
if (!CONFIG.newsApiKey) {
  console.warn('NewsAPI key not configured. Using demo data.');
}
    </script>
  </body>
</html>


